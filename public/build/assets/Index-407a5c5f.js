import{_ as k,a as r,c as d,b as e,w as c,v as m,d as h,F as b,r as f,o as a,t as u,e as _}from"./app-b3839823.js";const g={data(){return{workers:null,api:null,job:null,name:null,editId:null,editName:null,editJob:null,main_image:null}},mounted(){this.getWorkers()},methods:{isEditWorker(l,o,p){this.editId=l,this.editName=o,this.editJob=p},getWorkers(){r.get("/api/auth/workers").then(l=>{this.workers=l.data.data}).catch(l=>{console.log(l.response)})},editWorker(l){r.patch("/api/auth/workers/"+l,{name:this.editName,job:this.editJob}).then(o=>{this.editId=null,this.getWorkers()})},deleteWorker(l){r.delete("/api/auth/workers/"+l).then(o=>{this.getWorkers()})},addWorker(){let l=new FormData;l.append("name",this.name),l.append("job",this.job),l.append("main_image",this.main_image),r.post("/api/auth/workers/",l,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{this.getWorkers(),this.name=null,this.job=null})},onFileSelected(l){this.main_image=l.target.files[0]}}},x=e("h2",{class:"text-dark"},"Добавить участника команды ",-1),W={class:"mb-3"},v=e("h4",{class:"text-dark"},"Добавить фото",-1),y=e("p",{class:"text-dark"},"(добавлять квадратные фото, чтобы не растягивать верстку)",-1),C={class:"table"},j=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"id"),e("th",{scope:"col"},"Имя"),e("th",{scope:"col"},"Должность"),e("th",{scope:"col"},"Фото"),e("th",{scope:"col"},"Действия")])],-1),N={key:0},w={scope:"row"},F=["src"],I=["onClick"],V=["onClick"],J={key:1},D={scope:"row"},S=["onClick"];function U(l,o,p,B,n,s){return a(),d("div",null,[e("div",null,[x,c(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>n.name=t),type:"text",class:"form-control mt-3 mb-3 w-75",placeholder:"Имя"},null,512),[[m,n.name]]),c(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>n.job=t),type:"text",class:"form-control mt-3 mb-3 w-75",placeholder:"Должность"},null,512),[[m,n.job]]),e("div",W,[v,e("input",{onChange:o[2]||(o[2]=(...t)=>s.onFileSelected&&s.onFileSelected(...t)),class:"form-control w-75",type:"file",id:"formFile"},null,32)]),y,e("a",{href:"#",class:"btn btn-success mb-5",onClick:o[3]||(o[3]=h((...t)=>s.addWorker&&s.addWorker(...t),["prevent"]))},"Добавить")]),e("table",C,[j,e("tbody",null,[(a(!0),d(b,null,f(n.workers,t=>(a(),d(b,null,[t.id!==this.editId?(a(),d("tr",N,[e("th",w,u(t.id),1),e("td",null,u(t.name),1),e("td",null,u(t.job),1),e("td",null,[e("img",{class:"table-img",src:"/storage/"+t.main_image,alt:"No Image"},null,8,F)]),e("td",null,[e("a",{class:"text-decoration-none btn btn-primary me-2",href:"#",onClick:h(i=>this.isEditWorker(t.id,t.name,t.job),["prevent"])}," Редактировать",8,I),e("a",{class:"text-decoration-none btn btn-danger",href:"#",onClick:h(i=>s.deleteWorker(t.id),["prevent"])}," Удалить",8,V)])])):_("",!0),t.id===this.editId?(a(),d("tr",J,[e("th",D,u(t.id),1),e("td",null,[c(e("input",{"onUpdate:modelValue":o[4]||(o[4]=i=>n.editName=i),type:"text",class:"form-control w-50",placeholder:"Категория"},null,512),[[m,n.editName]])]),e("td",null,[c(e("input",{"onUpdate:modelValue":o[5]||(o[5]=i=>n.editJob=i),type:"text",class:"form-control w-50",placeholder:"Название"},null,512),[[m,n.editJob]])]),e("td",null,[e("a",{class:"text-decoration-none btn btn-primary me-2",href:"#",onClick:h(i=>s.editWorker(t.id),["prevent"])}," Изменить",8,S)])])):_("",!0)],64))),256))])])])}const M=k(g,[["render",U]]);export{M as default};
