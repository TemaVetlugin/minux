import{_ as x,a as h,c as u,b as e,w as o,v as d,d as m,F as k,r as g,o as p,t as a,e as V}from"./app-ee6ca037.js";const b={data(){return{versions:null,api:null,title:null,date:null,feature:null,link:null,size:null,editId:null,editDate:null,editTitle:null,editFeature:null,editLink:null,editSize:null,main_image:null}},mounted(){this.getVersions()},methods:{isEditVersion(n,l,c,f,i,r){this.editId=n,this.editDate=c,this.editTitle=l,this.editFeature=f,this.editLink=i,this.editSize=r},getVersions(){h.get("/api/auth/versions").then(n=>{this.versions=n.data.data,console.log(this.versions)}).catch(n=>{console.log(n.response)})},editVersion(n){h.patch("/api/auth/versions/"+n,{date:this.editDate,title:this.editTitle,feature:this.editFeature,link:this.editLink,size:this.editSize}).then(l=>{this.editId=null,this.getVersions()})},deleteVersion(n){h.delete("/api/auth/versions/"+n).then(l=>{this.getVersions()})},addVersion(){let n=new FormData;n.append("date",this.date),n.append("title",this.title),n.append("feature",this.feature),n.append("link",this.link),n.append("size",this.size),n.append("main_image",this.main_image),h.post("/api/auth/versions/",n,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{this.getVersions(),this.date=null,this.title=null,this.feature=null,this.link=null,this.size=null})},onFileSelected(n){this.main_image=n.target.files[0]}}},w=e("h2",{class:"text-dark"},"Добавить Версию",-1),y={class:"mb-3"},_=e("h4",{class:"text-dark"},"Добавить главное изображение",-1),z={class:"table"},F=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"id"),e("th",{scope:"col"},"Название"),e("th",{scope:"col"},"Дата выпуска"),e("th",{scope:"col"},"Что нового"),e("th",{scope:"col"},"Ссылка"),e("th",{scope:"col"},"Размер"),e("th",{scope:"col"},"Изображение"),e("th",{scope:"col"},"Действия")])],-1),C={key:0},U={scope:"row"},D=["src"],S=["onClick"],I=["onClick"],T={key:1},L={scope:"row"},v=["onClick"];function B(n,l,c,f,i,r){return p(),u("div",null,[e("div",null,[w,o(e("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>i.title=t),type:"text",class:"form-control mt-3 mb-3 w-75",placeholder:"Название"},null,512),[[d,i.title]]),o(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>i.date=t),type:"text",class:"form-control mt-3 mb-3 w-75",placeholder:"Дата выпуска"},null,512),[[d,i.date]]),o(e("textarea",{rows:"6","onUpdate:modelValue":l[2]||(l[2]=t=>i.feature=t),type:"text",class:"form-control mt-3 mb-3 w-75",placeholder:"Что нового"},null,512),[[d,i.feature]]),o(e("textarea",{"onUpdate:modelValue":l[3]||(l[3]=t=>i.link=t),type:"text",class:"form-control mt-3 mb-3 w-75",placeholder:"Ссылка"},null,512),[[d,i.link]]),o(e("input",{"onUpdate:modelValue":l[4]||(l[4]=t=>i.size=t),type:"text",class:"form-control mt-3 mb-3 w-75",placeholder:"Размер билда"},null,512),[[d,i.size]]),e("div",y,[_,e("input",{onChange:l[5]||(l[5]=(...t)=>r.onFileSelected&&r.onFileSelected(...t)),class:"form-control w-75",type:"file",id:"formFile"},null,32)]),e("a",{href:"#",class:"btn btn-success mb-5",onClick:l[6]||(l[6]=m((...t)=>r.addVersion&&r.addVersion(...t),["prevent"]))},"Добавить")]),e("table",z,[F,e("tbody",null,[(p(!0),u(k,null,g(i.versions,t=>(p(),u(k,null,[t.id!==this.editId?(p(),u("tr",C,[e("th",U,a(t.id),1),e("td",null,a(t.title),1),e("td",null,a(t.date),1),e("td",null,a(t.feature),1),e("td",null,a(t.link),1),e("td",null,a(t.size),1),e("td",null,[e("img",{class:"table-img",src:"/storage/"+t.main_image,alt:"No Image"},null,8,D)]),e("td",null,[e("a",{class:"text-decoration-none btn btn-primary me-2 mb-2",href:"#",onClick:m(s=>this.isEditVersion(t.id,t.title,t.date,t.feature,t.link,t.size),["prevent"])}," Редактировать",8,S),e("a",{class:"text-decoration-none btn btn-danger",href:"#",onClick:m(s=>r.deleteVersion(t.id),["prevent"])}," Удалить",8,I)])])):V("",!0),t.id===this.editId?(p(),u("tr",T,[e("th",L,a(t.id),1),e("td",null,[o(e("input",{"onUpdate:modelValue":l[7]||(l[7]=s=>i.editTitle=s),type:"text",class:"form-control w-100",placeholder:"Название"},null,512),[[d,i.editTitle]])]),e("td",null,[o(e("input",{"onUpdate:modelValue":l[8]||(l[8]=s=>i.editDate=s),type:"text",class:"form-control w-100",placeholder:"Дата выпуска"},null,512),[[d,i.editDate]])]),e("td",null,[o(e("textarea",{rows:"4","onUpdate:modelValue":l[9]||(l[9]=s=>i.editFeature=s),type:"text",class:"form-control w-100",placeholder:"Что нового"},null,512),[[d,i.editFeature]])]),e("td",null,[o(e("textarea",{"onUpdate:modelValue":l[10]||(l[10]=s=>i.editLink=s),type:"text",class:"form-control w-100",placeholder:"Ссылка"},null,512),[[d,i.editLink]])]),e("td",null,[o(e("input",{"onUpdate:modelValue":l[11]||(l[11]=s=>i.editSize=s),type:"text",class:"form-control w-100",placeholder:"Размер билда"},null,512),[[d,i.editSize]])]),e("td",null,[e("a",{class:"text-decoration-none btn btn-primary me-2",href:"#",onClick:m(s=>r.editVersion(t.id),["prevent"])}," Изменить",8,v)])])):V("",!0)],64))),256))])])])}const N=x(b,[["render",B]]);export{N as default};
